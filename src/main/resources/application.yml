# 기본 공통 설정
spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}  # 기본값은 local 프로파일
  
  # HTTP 인코딩 설정
  http:
    encoding:
      charset: UTF-8
      enabled: true
      force: true
  
  thymeleaf:
    cache: true  # 템플릿 캐시 활성화
    prefix: classpath:/templates/
    suffix: .html
    encoding: UTF-8
    mode: HTML
  
  web:
    resources:
      cache:
        period: 3600  # 정적 리소스 캐시 활성화 (1시간)
      chain:
        strategy:
          content:
            enabled: true
            paths: /css/**,/js/**
    
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
      
  # 메시지 소스 인코딩
  messages:
    encoding: UTF-8
    
  # JPA 설정
  jpa:
    open-in-view: false  # OSIV 비활성화로 SSE 관련 EntityManager 문제 해결
  
  # DevTools 설정 (핫 리로딩 비활성화)
  devtools:
    restart:
      enabled: false  # 자동 리로드 비활성화
    livereload:
      enabled: false  # LiveReload 비활성화

# Swagger UI 설정
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /api-docs
    enabled: true
  packages-to-scan: com.sejong.controller

# 공통 서버 설정
server:
  port: ${PORT:8080}
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# 로깅 설정
logging:
  charset:
    console: UTF-8
    file: UTF-8
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n" 

# 기본 저장소 설정 (local)
app:
  storage:
    type: local